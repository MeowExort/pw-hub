### PW Hub 0.2.0 — релиз от 2025-11-08

#### Кратко
В этой версии мы сосредоточились на невидимости (anti-detect), стабильности Lua API, наблюдаемости (логирование) и UX/устойчивости браузеров. Также добавили автоматическое закрытие всех созданных скриптом браузеров после завершения выполнения, чтобы рабочее пространство не «зависало».

#### Основные изменения
- Anti-detect для браузера:
  - Основной браузер при каждой смене аккаунта получает свежую InPrivate-сессию и новый правдоподобный отпечаток (User-Agent, navigator/screen, Canvas/WebGL, таймзона и т.д.).
  - Lua API v1: отпечаток закрепляется за аккаунтом (персистентность), подхватывается при последующих свитчах.
- Lua API каталог по атрибутам:
  - Введён атрибут `LuaApiFunction` и ленивая загрузка каталога API по атрибутам из сборок `Pw.*`.
  - AI‑панель и подсказки в редакторе показывают список функций ещё до запуска любых скриптов.
- Логирование (JSON Lines):
  - Асинхронный файл‑логгер в `logs/yyyy-MM-dd.jsonl` с уровнями Trace..Critical и потокобезопасностью.
  - Глобальные перехваты исключений и окно логов (тёмная тема), быстрый показ/скрытие хоткеем `Ctrl+Shift+L`.
- Автозакрытие браузеров v2 после завершения скриптов:
  - Все браузеры, созданные из Lua API v2 во время запуска, закрываются автоматически при завершении (успех/ошибка/стоп). Контекст изолирован по `runId`.
- Улучшения UI/устойчивости:
  - Индикаторы загрузки страниц (тонкие прогресс‑бары) для основного и v2‑браузеров.
  - Исправлено «схлопывание» по высоте у v2‑браузеров при пересоздании WebView2.
  - Окно логов переведено на тёмную тему и исправлена ошибка XAML ширины колонки.

#### Совместимость и поведение
- Переключение аккаунтов из UI: создаёт новую InPrivate‑сессию и применяет НОВЫЙ отпечаток каждый раз (рандомизировано).
- Lua API v1: смена аккаунта создаёт новую сессию (SeparateProfile) и использует закреплённый отпечаток аккаунта.
- Lua API v2: создание/управление несколькими браузерами; по окончании запуска все незакрытые окна будут закрыты автоматически.

#### Как включить режим отладки
- Запускайте приложение с флагом `--debug` (или `-d`).
  - В этом режиме по умолчанию открывается окно логов.
  - Порог логирования опускается до Debug.
- Хоткей показа окна логов: `Ctrl+Shift+L`.

#### Где искать логи
- Папка: `./logs/`
- Формат: `yyyy-MM-dd.jsonl` (по одной JSON‑записи на строку). Поля: `TimestampUtc`, `Level`, `Category`, `Message`, `Context`, `Exception`, `ThreadId`.

#### Обновление
- Версия приложения уже проставлена как `0.2.0` в `Pw.Hub/Pw.Hub.csproj`.
- Дополнительных миграций не требуется. Папки `Cookies/` и `Fingerprints/` будут созданы по требованию.

#### Благодарности
Спасибо за обратную связь: именно она помогла закрыть кейсы с пустым списком Lua API, невидимым прогрессом загрузки и «залипанием» браузеров после выполнения скриптов.

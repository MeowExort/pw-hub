# Pw.Hub — настольное приложение (WPF)

Приложение для управления отрядами/аккаунтами, запуска Lua‑модулей и автоматизации действий через встроенный браузер (WebView2).

## Возможности
- Дерево «Отряды и аккаунты», контекстные действия (добавить/редактировать/удалить).
- Загрузка серверов и персонажей аккаунта со страницы pwonline.ru, сохранение в БД.
- Выбор персонажа по умолчанию для каждого сервера.
- Запуск Lua‑модулей, окно логов с прогрессом и замером времени выполнения.
- Встроенный Lua‑редактор с подсветкой, автодополнением API, автоскроллом консоли вывода и кнопкой «Остановить» для запуска/отладки.
- AI генератор Lua‑скриптов (Ollama Cloud): генерация кода по описанию и сохранение в Scripts.
- AI‑чат помощник в редакторе кода: короткий предпросмотр кода, git‑подобный дифф, автоприменение изменений в режиме «AI brave». 
- Окно «Профиль»: изменение имени пользователя, смена пароля и кнопка «Сменить аккаунт».
- Редактор модулей (API):
  - Кнопка «🧩 Редактор скрипта» открывает LuaEditor вместо встроенного поля.
  - Кнопка «🤖 Сгенерировать описание» — AI‑генерация описания с учётом предыдущих версий и разделом «История изменений».
- LuaEditor: перед запуском/отладкой появляется окно ввода аргументов; значения доступны в глобальной таблице `args`.

## Сборка и запуск
- Требования: Windows 10/11, .NET SDK 10.0.
- Откройте `Pw.Hub.sln` в Rider/Visual Studio и соберите конфигурацию Release/Debug.
- При первом запуске база SQLite `pwhub.db` создастся автоматически миграциями EF Core.

## Где что хранится
- Локальная БД: `pwhub.db` рядом с исполняемым файлом.
- Куки аккаунтов: папка `Cookies/` (по одному json на аккаунт).
- Lua‑скрипты: `Pw.Hub/Scripts/*` — копируются в выходную директорию.

## AI Генератор
- Открыть: кнопка «AI генератор» в левом меню главного окна.
- Использование: опишите задачу, нажмите «Сгенерировать», проверьте результат и «Сохранить в Scripts».
- Требуется API‑ключ Ollama Cloud:
  - Переменная окружения: `OLLAMA_API_KEY`
  - Либо файл: `config/ai_settings.json`
    {
      "OllamaApiKey": "<ваш_ключ>"
    }

## Полезные ссылки
- Журнал изменений: [CHANGELOG.md](CHANGELOG.md)
- Корневая документация репозитория: [../README.md](../README.md)

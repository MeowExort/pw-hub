### PW Hub 1.0.0 — релиз от 2025-11-17

#### Кратко
Мажорный релиз, в котором появились полноценная библиотека модулей в приложении, редактор и клиент к Modules API, а также отдельный сервис Pw.Modules.Api с Swagger, Health Checks, HTTP‑логированием и OpenTelemetry. Добавлены интеграции с Telegram (бот и API), Docker‑сборка для быстрого запуска API и улучшения UX/устойчивости.

#### Основные изменения
- Pw.Hub (WPF):
  - Библиотека модулей: окно `ModulesLibraryWindow` и `ModulesLibraryViewModel` для просмотра, установки, удаления и обновления модулей. Индикаторы обновлений, массовые операции.
  - Редактор API‑описаний модулей: `ModulesApiEditorWindow`/`ModulesApiEditorViewModel` с предпросмотром и валидацией; автозаполнение и генерация описаний через AI (`AiDocService`).
  - Клиент и сервисы:
    - `ModulesApiClient` — получение метаданных, установка/удаление, авторизация.
    - `ModulesSyncService` — синхронизация локального состояния модулей с сервером.
    - `UpdatesCheckService` — периодическая проверка наличия обновлений.
  - Улучшения UX: корректные состояния кнопок «Установить/Удалить/Обновить», возврат главного окна поверх после закрытия дочерних окон, стабильность WebView2 без «белых вспышек».
  - Обновлены зависимости: WebView2 `1.0.3537.50`, EF Core `9.0.0`, Markdig `0.37.0`.

- Pw.Modules.Api (Minimal API):
  - Функциональность модулей: CRUD/выдача метаданных (версия, описание, ссылки), базовые метрики в `ModuleMetrics`.
  - Наблюдаемость и обслуживаемость: Swagger UI на корне (`/`), Health Checks (`/healthz`), HTTP‑логирование (`UseHttpLogging`).
  - OpenTelemetry: чтение `OTEL_EXPORTER_OTLP_ENDPOINT`/`OTEL_SERVICE_NAME` и экспорт через OTLP при наличии настроек.
  - Telegram: эндпоинты для привязки/отвязки, генерации state и отправки сообщений; фоновые обработчики бота.
  - Docker: многоступенчатая сборка и быстрый запуск контейнера (см. примеры ниже).

#### Совместимость и поведение
- Версия приложений повышена до `1.0.0` и считается стабильной.
- Pw.Hub:
  - Требуется установленный Microsoft Edge WebView2 Runtime.
  - Локальная БД SQLite создаётся автоматически при первом запуске; миграции для Pw.Hub не применяются автоматически из кода — учитывайте это при изменениях схемы.
- Pw.Modules.Api:
  - Требуется PostgreSQL и строка подключения. Используется приоритет: переменная окружения `PW_MODULES_PG`, затем `ConnectionStrings:Postgres` в конфигурации.
  - При старте выполняется `db.Database.MigrateAsync()` — актуализация схемы БД происходит автоматически при корректной строке подключения.

#### Как включить режим отладки (Pw.Hub)
- Запускайте приложение с флагом `--debug` (или `-d`).
  - В этом режиме окно логов открывается по умолчанию.
  - Порог логирования понижается до Debug.
- Хоткей показа/скрытия окна логов: `Ctrl+Shift+L`.

#### Где искать логи (Pw.Hub)
- Папка: `./logs/`
- Формат: `yyyy-MM-dd.jsonl` (по одной JSON‑записи на строку). Поля: `TimestampUtc`, `Level`, `Category`, `Message`, `Context`, `Exception`, `ThreadId`.

#### Быстрый старт Pw.Modules.Api
Локально:
```
dotnet run -p Pw.Modules.Api
```

Docker:
```
docker build -t pw-modules-api .
docker run --rm -p 8080:8080 -e PW_MODULES_PG="Host=...;Database=...;Username=...;Password=..." pw-modules-api
```

Swagger UI: `http://localhost:8080/` (или порт вашей среды)

Health Checks: `http://localhost:8080/healthz`

#### Обновление
- Pw.Hub: версия выставлена как `1.0.0` в `Pw.Hub/Pw.Hub.csproj`. Достаточно обновить бинарии/собрать решение. Убедитесь в наличии WebView2 Runtime.
- Pw.Modules.Api: при наличии строки подключения миграции применяются автоматически при старте. В контейнере обязательно прокиньте `PW_MODULES_PG`.

#### Благодарности
Спасибо всем, кто присылал обратную связь по библиотеке модулей, редактору и API. Ваши замечания помогли довести функциональность до стабильного мажорного релиза 1.0.0.
